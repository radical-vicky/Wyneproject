{% extends 'base.html' %}
{% load static %}

{% block title %}Privacy Policy - CoopConnect Premium{% endblock %}

{% block extra_css %}
<style>
/* Privacy Policy Specific Styles */
.privacy-header {
    background: linear-gradient(135deg, rgba(0, 168, 89, 0.1), rgba(0, 102, 179, 0.1));
    border-radius: var(--radius-lg);
    padding: 40px;
    margin-bottom: 40px;
    border: 1px solid rgba(0, 168, 89, 0.2);
    text-align: center;
}

.privacy-icon {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: var(--primary-gradient);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    color: white;
    font-size: 2rem;
}

.privacy-content {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
}

.privacy-section {
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: 30px;
    margin-bottom: 30px;
    border: 1px solid var(--border-color);
}

.section-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--border-color);
}

.section-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(0, 168, 89, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--coop-green);
    font-size: 1.3rem;
}

.section-title {
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--text-primary);
}

.section-subtitle {
    color: var(--text-secondary);
    font-size: 0.95rem;
}

.privacy-points {
    list-style-type: none;
    padding-left: 0;
}

.privacy-point {
    padding: 15px;
    margin-bottom: 15px;
    background: var(--darker-bg);
    border-radius: var(--radius);
    border-left: 3px solid var(--coop-green);
}

.point-title {
    font-weight: 600;
    color: var(--coop-green);
    margin-bottom: 8px;
    font-size: 1rem;
}

.point-content {
    color: var(--text-secondary);
    line-height: 1.6;
    font-size: 0.95rem;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    background: var(--darker-bg);
    border-radius: var(--radius);
    overflow: hidden;
}

.data-table th {
    background: rgba(0, 168, 89, 0.1);
    padding: 15px;
    text-align: left;
    color: var(--coop-green);
    font-weight: 600;
    border-bottom: 2px solid var(--border-color);
}

.data-table td {
    padding: 15px;
    border-bottom: 1px solid var(--border-color);
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.data-table tr:hover {
    background: rgba(255, 255, 255, 0.02);
}

.data-table tr:last-child td {
    border-bottom: none;
}

.data-category {
    font-weight: 600;
    color: var(--text-primary);
}

.data-purpose {
    color: var(--text-secondary);
}

.consent-options {
    background: var(--darker-bg);
    border-radius: var(--radius);
    padding: 25px;
    margin: 25px 0;
}

.consent-item {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 15px;
    margin-bottom: 15px;
    background: var(--card-bg);
    border-radius: var(--radius);
    border: 1px solid var(--border-color);
}

.consent-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(33, 150, 243, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--info);
    font-size: 1rem;
    flex-shrink: 0;
}

.consent-info {
    flex: 1;
}

.consent-title {
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--text-primary);
}

.consent-desc {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: 10px;
}

.consent-controls {
    display: flex;
    gap: 10px;
}

.toggle-group {
    display: flex;
    align-items: center;
    gap: 8px;
}

.privacy-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 30px 0;
}

.feature-card {
    background: var(--darker-bg);
    border-radius: var(--radius);
    padding: 25px;
    text-align: center;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
}

.feature-card:hover {
    border-color: var(--coop-green);
    transform: translateY(-3px);
}

.feature-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: rgba(0, 168, 89, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
    color: var(--coop-green);
    font-size: 1.5rem;
}

.feature-title {
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--text-primary);
}

.feature-desc {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.privacy-controls {
    background: linear-gradient(135deg, rgba(0, 168, 89, 0.05), rgba(0, 102, 179, 0.05));
    border-radius: var(--radius-lg);
    padding: 30px;
    margin: 40px 0;
    border: 1px solid rgba(0, 168, 89, 0.2);
}

.control-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin: 25px 0;
}

.control-card {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 20px;
    text-align: center;
    cursor: pointer;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
}

.control-card:hover {
    border-color: var(--coop-green);
    background: rgba(0, 168, 89, 0.05);
}

.control-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--primary-gradient);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
    color: white;
    font-size: 1.3rem;
}

.control-title {
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--text-primary);
}

.download-options {
    display: flex;
    gap: 15px;
    margin-top: 30px;
    justify-content: center;
    flex-wrap: wrap;
}

.download-btn {
    padding: 12px 25px;
    background: var(--darker-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.95rem;
}

.download-btn:hover {
    background: rgba(0, 168, 89, 0.1);
    border-color: var(--coop-green);
    color: var(--coop-green);
}

.timeline {
    position: relative;
    padding: 40px 0;
    margin: 30px 0;
}

.timeline-item {
    position: relative;
    padding-left: 40px;
    margin-bottom: 30px;
}

.timeline-item:last-child {
    margin-bottom: 0;
}

.timeline-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--coop-green);
    border: 3px solid var(--dark-bg);
    z-index: 2;
}

.timeline-item::after {
    content: '';
    position: absolute;
    left: 9px;
    top: 20px;
    width: 2px;
    height: calc(100% + 10px);
    background: var(--coop-green);
    opacity: 0.3;
}

.timeline-item:last-child::after {
    display: none;
}

.timeline-content {
    background: var(--darker-bg);
    border-radius: var(--radius);
    padding: 20px;
    border: 1px solid var(--border-color);
}

.timeline-date {
    font-weight: 600;
    color: var(--coop-green);
    margin-bottom: 5px;
}

.timeline-text {
    color: var(--text-secondary);
    line-height: 1.6;
}

.contact-info {
    background: var(--darker-bg);
    border-radius: var(--radius);
    padding: 30px;
    margin: 30px 0;
    text-align: center;
}

.contact-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin: 25px 0;
}

.contact-item {
    text-align: center;
    padding: 20px;
    background: var(--card-bg);
    border-radius: var(--radius);
    border: 1px solid var(--border-color);
}

.contact-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(33, 150, 243, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
    color: var(--info);
    font-size: 1.3rem;
}

.contact-title {
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--text-primary);
}

.contact-detail {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.faq-section {
    margin: 40px 0;
}

.faq-item {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 20px;
    margin-bottom: 15px;
    border: 1px solid var(--border-color);
    cursor: pointer;
    transition: all 0.3s ease;
}

.faq-item:hover {
    border-color: var(--coop-green);
}

.faq-question {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 15px;
}

.faq-q {
    font-weight: 600;
    color: var(--text-primary);
    flex: 1;
}

.faq-icon {
    color: var(--coop-green);
    transition: transform 0.3s ease;
}

.faq-item.active .faq-icon {
    transform: rotate(180deg);
}

.faq-answer {
    color: var(--text-secondary);
    line-height: 1.6;
    margin-top: 15px;
    display: none;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
}

.faq-item.active .faq-answer {
    display: block;
}

.compliance-badges {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin: 30px 0;
    flex-wrap: wrap;
}

.badge-item {
    background: var(--darker-bg);
    border-radius: var(--radius);
    padding: 15px 25px;
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: 10px;
}

.badge-icon {
    color: var(--coop-green);
    font-size: 1.5rem;
}

.badge-text {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.9rem;
}

.privacy-updates {
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.05), rgba(255, 193, 7, 0.02));
    border: 1px solid rgba(255, 193, 7, 0.2);
    border-radius: var(--radius);
    padding: 20px;
    margin: 30px 0;
}

.update-alert {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
}

.update-icon {
    color: var(--warning);
    font-size: 1.5rem;
}

.update-text {
    color: var(--warning);
    font-weight: 600;
}

.update-details {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

@media (max-width: 768px) {
    .privacy-header {
        padding: 30px 20px;
    }
    
    .privacy-content {
        padding: 10px;
    }
    
    .privacy-section {
        padding: 20px;
    }
    
    .section-header {
        flex-direction: column;
        text-align: center;
        gap: 10px;
    }
    
    .data-table {
        display: block;
        overflow-x: auto;
    }
    
    .control-grid, .contact-grid, .privacy-features {
        grid-template-columns: 1fr;
    }
    
    .download-options {
        flex-direction: column;
    }
    
    .download-btn {
        justify-content: center;
    }
    
    .consent-item {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .consent-controls {
        width: 100%;
        justify-content: space-between;
    }
}

@media (max-width: 576px) {
    .privacy-header {
        padding: 20px 15px;
    }
    
    .privacy-icon {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }
    
    .timeline-item {
        padding-left: 30px;
    }
    
    .timeline-item::before {
        width: 16px;
        height: 16px;
    }
    
    .faq-question {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .compliance-badges {
        flex-direction: column;
        align-items: center;
    }
    
    .badge-item {
        width: 100%;
        justify-content: center;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="fade-in">
    <!-- Privacy Header -->
    <div class="privacy-header">
        <div class="privacy-icon">
            <i class="fas fa-shield-alt"></i>
        </div>
        <h1 class="mb-2">Privacy Policy</h1>
        <p class="text-secondary">Last updated: {{ last_updated|date:"F j, Y" }}</p>
        
        <div class="mt-4">
            <div class="d-flex gap-3 justify-content-center flex-wrap">
                <span class="badge badge-success">GDPR Compliant</span>
                <span class="badge badge-info">CCPA Ready</span>
                <span class="badge badge-vip">End-to-End Encrypted</span>
                <span class="badge badge-secondary">ISO 27001 Certified</span>
            </div>
        </div>
    </div>

    <div class="privacy-content">
        <!-- Introduction -->
        <div class="privacy-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div>
                    <h2 class="section-title">Introduction</h2>
                    <p class="section-subtitle">Your privacy is important to us</p>
                </div>
            </div>
            
            <div class="point-content">
                <p>Welcome to CoopConnect Premium. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our platform. Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the platform.</p>
                
                <p>We reserve the right to make changes to this Privacy Policy at any time and for any reason. We will alert you about any changes by updating the "Last Updated" date of this Privacy Policy. You are encouraged to periodically review this Privacy Policy to stay informed of updates.</p>
            </div>
        </div>

        <!-- Data Collection -->
        <div class="privacy-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-database"></i>
                </div>
                <div>
                    <h2 class="section-title">Information We Collect</h2>
                    <p class="section-subtitle">What data we collect and why</p>
                </div>
            </div>
            
            <div class="privacy-points">
                <div class="privacy-point">
                    <div class="point-title">Personal Information</div>
                    <div class="point-content">
                        We collect personal information that you voluntarily provide to us when you register on the platform, express interest in obtaining information about us or our products and services, when you participate in activities on the platform, or otherwise contact us.
                    </div>
                </div>
                
                <div class="privacy-point">
                    <div class="point-title">Usage Data</div>
                    <div class="point-content">
                        We automatically collect certain information when you visit, use, or navigate the platform. This information does not reveal your specific identity but may include device and usage information, such as your IP address, browser and device characteristics, operating system, language preferences, referring URLs, device name, country, location, information about how and when you use our platform, and other technical information.
                    </div>
                </div>
                
                <div class="privacy-point">
                    <div class="point-title">Communication Data</div>
                    <div class="point-content">
                        We collect information you provide when you communicate with other users, including messages, voice calls, video calls, and any other content you share on the platform.
                    </div>
                </div>
            </div>
            
            <!-- Data Collection Table -->
            <h3 class="mt-4 mb-3">Data Collection Summary</h3>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Data Category</th>
                        <th>What We Collect</th>
                        <th>Purpose</th>
                        <th>Retention Period</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="data-category">Account Data</td>
                        <td>Name, email, phone, profile info</td>
                        <td class="data-purpose">Account creation and management</td>
                        <td>Until account deletion</td>
                    </tr>
                    <tr>
                        <td class="data-category">Profile Data</td>
                        <td>Photos, bio, location, preferences</td>
                        <td class="data-purpose">Service personalization</td>
                        <td>Until account deletion</td>
                    </tr>
                    <tr>
                        <td class="data-category">Communication Data</td>
                        <td>Messages, calls, media shared</td>
                        <td class="data-purpose">Service delivery</td>
                        <td>30 days after deletion</td>
                    </tr>
                    <tr>
                        <td class="data-category">Usage Data</td>
                        <td>Activity logs, preferences, interactions</td>
                        <td class="data-purpose">Service improvement</td>
                        <td>6 months</td>
                    </tr>
                    <tr>
                        <td class="data-category">Payment Data</td>
                        <td>Transaction history, wallet balance</td>
                        <td class="data-purpose">Financial processing</td>
                        <td>7 years (legal requirement)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- How We Use Your Information -->
        <div class="privacy-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-cogs"></i>
                </div>
                <div>
                    <h2 class="section-title">How We Use Your Information</h2>
                    <p class="section-subtitle">Purposes for processing your data</p>
                </div>
            </div>
            
            <div class="privacy-features">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="feature-title">Service Delivery</div>
                    <div class="feature-desc">Provide and maintain our platform services</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="feature-title">Notifications</div>
                    <div class="feature-desc">Send you updates and alerts</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="feature-title">Security</div>
                    <div class="feature-desc">Protect against fraudulent activity</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="feature-title">Analytics</div>
                    <div class="feature-desc">Improve platform performance</div>
                </div>
            </div>
        </div>

        <!-- Your Privacy Rights -->
        <div class="privacy-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-user-shield"></i>
                </div>
                <div>
                    <h2 class="section-title">Your Privacy Rights</h2>
                    <p class="section-subtitle">Control your personal information</p>
                </div>
            </div>
            
            <div class="privacy-controls">
                <h3 class="text-center mb-4">Take Control of Your Data</h3>
                
                <div class="control-grid">
                    <div class="control-card" onclick="exportData()">
                        <div class="control-icon">
                            <i class="fas fa-download"></i>
                        </div>
                        <div class="control-title">Export Data</div>
                        <div class="text-secondary text-sm">Download your information</div>
                    </div>
                    
                    <div class="control-card" onclick="updatePreferences()">
                        <div class="control-icon">
                            <i class="fas fa-sliders-h"></i>
                        </div>
                        <div class="control-title">Privacy Settings</div>
                        <div class="text-secondary text-sm">Adjust your preferences</div>
                    </div>
                    
                    <div class="control-card" onclick="requestDeletion()">
                        <div class="control-icon">
                            <i class="fas fa-trash"></i>
                        </div>
                        <div class="control-title">Delete Account</div>
                        <div class="text-secondary text-sm">Remove your data permanently</div>
                    </div>
                    
                    <div class="control-card" onclick="contactDPO()">
                        <div class="control-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <div class="control-title">Contact DPO</div>
                        <div class="text-secondary text-sm">Data Protection Officer</div>
                    </div>
                </div>
            </div>
            
            <div class="consent-options">
                <h3 class="mb-4">Consent Management</h3>
                
                <div class="consent-item">
                    <div class="consent-icon">
                        <i class="fas fa-bullhorn"></i>
                    </div>
                    <div class="consent-info">
                        <div class="consent-title">Marketing Communications</div>
                        <div class="consent-desc">Receive promotional emails and notifications about new features</div>
                        <div class="consent-controls">
                            <div class="toggle-group">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="marketingConsent" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span>Allow</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="consent-item">
                    <div class="consent-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="consent-info">
                        <div class="consent-title">Analytics & Research</div>
                        <div class="consent-desc">Allow anonymous data collection for service improvement</div>
                        <div class="consent-controls">
                            <div class="toggle-group">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="analyticsConsent" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span>Allow</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="consent-item">
                    <div class="consent-icon">
                        <i class="fas fa-user-friends"></i>
                    </div>
                    <div class="consent-info">
                        <div class="consent-title">Personalized Recommendations</div>
                        <div class="consent-desc">Show personalized content and connection suggestions</div>
                        <div class="consent-controls">
                            <div class="toggle-group">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="personalizationConsent" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span>Allow</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Sharing & Disclosure -->
        <div class="privacy-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-share-alt"></i>
                </div>
                <div>
                    <h2 class="section-title">Data Sharing & Disclosure</h2>
                    <p class="section-subtitle">Who we share data with</p>
                </div>
            </div>
            
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-date">Service Providers</div>
                        <div class="timeline-text">We may share your information with third-party vendors, service providers, contractors, or agents who perform services for us or on our behalf and require access to such information to do that work.</div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-date">Business Transfers</div>
                        <div class="timeline-text">We may share or transfer your information in connection with, or during negotiations of, any merger, sale of company assets, financing, or acquisition of all or a portion of our business to another company.</div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-date">Legal Requirements</div>
                        <div class="timeline-text">We may disclose your information where we are legally required to do so in order to comply with applicable law, governmental requests, a judicial proceeding, court order, or legal process.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Security -->
        <div class="privacy-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <div>
                    <h2 class="section-title">Data Security</h2>
                    <p class="section-subtitle">How we protect your information</p>
                </div>
            </div>
            
            <div class="privacy-features">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="feature-title">End-to-End Encryption</div>
                    <div class="feature-desc">All messages and calls are encrypted</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="feature-title">Secure Servers</div>
                    <div class="feature-desc">ISO 27001 certified data centers</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-fingerprint"></i>
                    </div>
                    <div class="feature-title">Multi-Factor Auth</div>
                    <div class="feature-desc">Advanced authentication methods</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-check"></i>
                    </div>
                    <div class="feature-title">Regular Audits</div>
                    <div class="feature-desc">Third-party security assessments</div>
                </div>
            </div>
            
            <div class="compliance-badges mt-4">
                <div class="badge-item">
                    <div class="badge-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="badge-text">GDPR Compliant</div>
                </div>
                
                <div class="badge-item">
                    <div class="badge-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="badge-text">CCPA Ready</div>
                </div>
                
                <div class="badge-item">
                    <div class="badge-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="badge-text">ISO 27001 Certified</div>
                </div>
            </div>
        </div>

        <!-- Policy Updates -->
        <div class="privacy-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-sync-alt"></i>
                </div>
                <div>
                    <h2 class="section-title">Policy Updates</h2>
                    <p class="section-subtitle">How we notify you about changes</p>
                </div>
            </div>
            
            <div class="privacy-updates">
                <div class="update-alert">
                    <div class="update-icon">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="update-text">Recent Update Notification</div>
                </div>
                <div class="update-details">
                    Last updated on {{ last_updated|date:"F j, Y" }}. We added new sections about data retention and user rights. We'll notify you 30 days before any material changes take effect.
                </div>
            </div>
            
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-date">{{ last_updated|date:"F j, Y" }}</div>
                        <div class="timeline-text">Added data retention details and enhanced user control options</div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-date">January 15, 2024</div>
                        <div class="timeline-text">Updated privacy controls and consent management features</div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-content">
                        <div class="timeline-date">October 1, 2023</div>
                        <div class="timeline-text">Implemented GDPR and CCPA compliance measures</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- FAQ Section -->
        <div class="faq-section">
            <h2 class="section-title mb-4">Frequently Asked Questions</h2>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <div class="faq-q">How can I download my data?</div>
                    <div class="faq-icon">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="faq-answer">
                    You can download all your data from the Privacy Controls section above. We provide data in multiple formats including JSON, CSV, and PDF for your convenience.
                </div>
            </div>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <div class="faq-q">How long is my data stored?</div>
                    <div class="faq-icon">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="faq-answer">
                    Different types of data have different retention periods. Account data is stored until you delete your account, while usage data is typically retained for 6 months. See the Data Collection table for specific retention periods.
                </div>
            </div>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <div class="faq-q">Is my communication data encrypted?</div>
                    <div class="faq-icon">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="faq-answer">
                    Yes, all messages, voice calls, and video calls on CoopConnect Premium are end-to-end encrypted. This means only you and the person you're communicating with can read or listen to what is sent.
                </div>
            </div>
            
            <div class="faq-item" onclick="toggleFAQ(this)">
                <div class="faq-question">
                    <div class="faq-q">How do I contact the Data Protection Officer?</div>
                    <div class="faq-icon">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="faq-answer">
                    You can contact our Data Protection Officer at dpo@coopconnect.com or use the contact information provided in the Contact Us section below.
                </div>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="contact-info">
            <h2 class="section-title mb-4">Contact Us</h2>
            <p class="text-secondary mb-4">If you have questions or concerns about this Privacy Policy</p>
            
            <div class="contact-grid">
                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="contact-title">General Inquiries</div>
                    <div class="contact-detail">privacy@coopconnect.com</div>
                </div>
                
                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="contact-title">Data Protection Officer</div>
                    <div class="contact-detail">dpo@coopconnect.com</div>
                </div>
                
                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="contact-title">Privacy Hotline</div>
                    <div class="contact-detail">+1 (800) 123-4567</div>
                </div>
                
                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="contact-title">Mailing Address</div>
                    <div class="contact-detail">Privacy Department, CoopConnect Inc.</div>
                </div>
            </div>
        </div>

        <!-- Download Options -->
        <div class="text-center mt-5">
            <h3 class="mb-3">Download Privacy Policy</h3>
            <div class="download-options">
                <button class="download-btn" onclick="downloadPDF()">
                    <i class="fas fa-file-pdf"></i> PDF Version
                </button>
                <button class="download-btn" onclick="downloadText()">
                    <i class="fas fa-file-alt"></i> Text Version
                </button>
                <button class="download-btn" onclick="printPolicy()">
                    <i class="fas fa-print"></i> Print Policy
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Export Data Modal -->
<div id="exportModalContent" style="display: none;">
    <h3 class="card-title mb-3">Export Your Data</h3>
    <form id="exportForm" onsubmit="processExport(event)">
        <div class="form-group">
            <label class="form-label">Data Categories</label>
            <div class="d-flex flex-column gap-2">
                <label class="form-check">
                    <input type="checkbox" class="form-check-input" name="category_profile" checked>
                    <span class="form-check-label">Profile Information</span>
                </label>
                <label class="form-check">
                    <input type="checkbox" class="form-check-input" name="category_posts" checked>
                    <span class="form-check-label">Posts & Media</span>
                </label>
                <label class="form-check">
                    <input type="checkbox" class="form-check-input" name="category_messages" checked>
                    <span class="form-check-label">Messages & Calls</span>
                </label>
                <label class="form-check">
                    <input type="checkbox" class="form-check-input" name="category_contacts" checked>
                    <span class="form-check-label">Contacts & Connections</span>
                </label>
                <label class="form-check">
                    <input type="checkbox" class="form-check-input" name="category_payments" checked>
                    <span class="form-check-label">Payment History</span>
                </label>
                <label class="form-check">
                    <input type="checkbox" class="form-check-input" name="category_settings" checked>
                    <span class="form-check-label">Account Settings</span>
                </label>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Export Format</label>
            <select class="form-control" name="format">
                <option value="json">JSON (Machine readable)</option>
                <option value="pdf">PDF (Human readable)</option>
                <option value="csv">CSV (Spreadsheet)</option>
                <option value="html">HTML (Web page)</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label">Date Range</label>
            <div class="row">
                <div class="col-6">
                    <input type="date" class="form-control" name="start_date">
                </div>
                <div class="col-6">
                    <input type="date" class="form-control" name="end_date">
                </div>
            </div>
        </div>
        
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i>
            <div>
                <strong>Processing Time</strong>
                <div class="text-sm">Large data exports may take up to 48 hours to prepare.</div>
            </div>
        </div>
        
        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary flex-1">
                <i class="fas fa-download"></i> Request Export
            </button>
            <button type="button" class="btn btn-secondary" onclick="hideModal()">Cancel</button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Initialize consent toggles
    initializeConsentToggles();
    
    // Initialize FAQ functionality
    initializeFAQ();
});

// Initialize consent toggles
function initializeConsentToggles() {
    $('.toggle-switch input').change(function() {
        const consentType = $(this).attr('id').replace('Consent', '');
        const isAllowed = $(this).is(':checked');
        
        $.ajax({
            url: '/api/privacy/update-consent/',
            method: 'POST',
            data: {
                consent_type: consentType,
                allowed: isAllowed,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            },
            success: function(response) {
                if (response.success) {
                    showMessage(`Consent updated successfully!`, 'success');
                } else {
                    alert('Failed to update consent: ' + response.message);
                    // Revert toggle on error
                    $(this).prop('checked', !isAllowed);
                }
            },
            error: function() {
                alert('Error updating consent. Please try again.');
                $(this).prop('checked', !isAllowed);
            }
        });
    });
}

// Initialize FAQ
function initializeFAQ() {
    // First FAQ open by default
    $('.faq-item').first().addClass('active').find('.faq-answer').show();
}

// Toggle FAQ
function toggleFAQ(element) {
    $(element).toggleClass('active');
    $(element).find('.faq-answer').slideToggle(300);
}

// Export data
function exportData() {
    showModal($('#exportModalContent').html());
}

function processExport(event) {
    event.preventDefault();
    
    // Show processing
    $('#modalContent').html(`
        <div class="text-center p-5">
            <div class="processing-icon mb-4">
                <i class="fas fa-spinner fa-spin fa-3x"></i>
            </div>
            <h4 class="mb-2">Preparing Your Data Export</h4>
            <p class="text-secondary">This may take a few minutes...</p>
            <div class="progress-bar mt-4">
                <div class="progress-fill" id="exportProgress" style="width: 0%"></div>
            </div>
        </div>
    `);
    
    // Simulate export process
    let progress = 0;
    const interval = setInterval(() => {
        progress += 2;
        $('#exportProgress').css('width', progress + '%');
        
        if (progress >= 100) {
            clearInterval(interval);
            
            // Simulate download
            const blob = new Blob(['Your data export'], { type: 'application/zip' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `coopconnect-data-export-${new Date().toISOString().split('T')[0]}.zip`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showMessage('Data export completed! Check your email for the download link.', 'success');
            hideModal();
        }
    }, 100);
}

// Update preferences
function updatePreferences() {
    window.location.href = '{% url "settings" %}?tab=privacy';
}

// Request deletion
function requestDeletion() {
    showModal(`
        <div class="text-center p-4">
            <div class="warning-icon mb-4" style="width: 80px; height: 80px; font-size: 2.5rem;">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 class="mb-3">Account Deletion Request</h3>
            <p class="text-secondary mb-4">This will permanently delete your account and all associated data.</p>
            
            <div class="consequences-list mb-4">
                <div class="consequence-item">
                    <div class="consequence-icon">
                        <i class="fas fa-user-times"></i>
                    </div>
                    <div class="consequence-text">
                        Your profile will be permanently deleted
                    </div>
                </div>
                <div class="consequence-item">
                    <div class="consequence-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="consequence-text">
                        All your messages and posts will be removed
                    </div>
                </div>
                <div class="consequence-item">
                    <div class="consequence-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="consequence-text">
                        Your wallet balance will be forfeited
                    </div>
                </div>
                <div class="consequence-item">
                    <div class="consequence-icon">
                        <i class="fas fa-ban"></i>
                    </div>
                    <div class="consequence-text">
                        This action cannot be undone
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Deletion Reason (Optional)</label>
                <select class="form-control" id="deletionReason">
                    <option value="">Select a reason</option>
                    <option value="privacy">Privacy concerns</option>
                    <option value="not_using">Not using the service</option>
                    <option value="found_alternative">Found a better alternative</option>
                    <option value="technical">Technical issues</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div class="d-flex gap-2 mt-4">
                <button class="btn btn-danger flex-1" onclick="confirmDeletion()">
                    <i class="fas fa-trash"></i> Request Deletion
                </button>
                <button class="btn btn-secondary flex-1" onclick="hideModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    `);
}

function confirmDeletion() {
    const reason = $('#deletionReason').val();
    
    $.ajax({
        url: '/api/account/delete-request/',
        method: 'POST',
        data: {
            reason: reason,
            csrfmiddlewaretoken: '{{ csrf_token }}'
        },
        success: function(response) {
            if (response.success) {
                showMessage('Deletion request submitted. You will receive a confirmation email.', 'success');
                hideModal();
            } else {
                alert('Failed to submit deletion request: ' + response.message);
            }
        },
        error: function() {
            alert('Error submitting deletion request. Please try again.');
        }
    });
}

// Contact DPO
function contactDPO() {
    showModal(`
        <h3 class="card-title mb-3">Contact Data Protection Officer</h3>
        <form id="dpoForm" onsubmit="submitDPOContact(event)">
            <div class="form-group">
                <label class="form-label">Subject</label>
                <select class="form-control" name="subject" required>
                    <option value="">Select subject</option>
                    <option value="data_access">Data Access Request</option>
                    <option value="data_correction">Data Correction Request</option>
                    <option value="data_deletion">Data Deletion Request</option>
                    <option value="consent">Consent Management</option>
                    <option value="complaint">Privacy Complaint</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-control" name="description" rows="5" required placeholder="Please describe your privacy concern..."></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">Preferred Contact Method</label>
                <div class="d-flex gap-3">
                    <label class="form-check">
                        <input type="radio" class="form-check-input" name="contact_method" value="email" checked>
                        <span class="form-check-label">Email</span>
                    </label>
                    <label class="form-check">
                        <input type="radio" class="form-check-input" name="contact_method" value="phone">
                        <span class="form-check-label">Phone</span>
                    </label>
                </div>
            </div>
            
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary flex-1">
                    <i class="fas fa-paper-plane"></i> Send Message
                </button>
                <button type="button" class="btn btn-secondary" onclick="hideModal()">Cancel</button>
            </div>
        </form>
    `);
}

function submitDPOContact(event) {
    event.preventDefault();
    const formData = $(event.target).serialize();
    
    $.ajax({
        url: '/api/privacy/contact-dpo/',
        method: 'POST',
        data: formData,
        success: function(response) {
            if (response.success) {
                showMessage('Message sent to DPO. You will receive a response within 48 hours.', 'success');
                hideModal();
            } else {
                alert('Failed to send message: ' + response.message);
            }
        },
        error: function() {
            alert('Error sending message. Please try again.');
        }
    });
}

// Download PDF
function downloadPDF() {
    // Simulate PDF download
    showMessage('Preparing PDF download...', 'info');
    
    setTimeout(() => {
        const blob = new Blob(['Privacy Policy PDF'], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'CoopConnect-Privacy-Policy.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showMessage('PDF downloaded successfully!', 'success');
    }, 1000);
}

// Download text
function downloadText() {
    const text = document.documentElement.innerText;
    const blob = new Blob([text], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'CoopConnect-Privacy-Policy.txt';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    showMessage('Text version downloaded!', 'success');
}

// Print policy
function printPolicy() {
    window.print();
}

// Show message
function showMessage(message, type) {
    const alert = $(`
        <div class="alert alert-${type}">
            <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
            <span>${message}</span>
        </div>
    `);
    
    $('.messages-container').append(alert);
    
    setTimeout(() => {
        alert.fadeOut(300, () => alert.remove());
    }, 5000);
}
</script>
{% endblock %}