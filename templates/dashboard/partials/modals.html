<!-- Image Modal -->
<div id="image-modal" class="fixed inset-0 bg-black/90 hidden z-50 flex items-center justify-center p-4">
    <button onclick="closeImageModal()" 
            class="absolute top-4 right-4 text-white text-2xl p-2 hover:bg-white/10 rounded-full">
        <i class="fas fa-times"></i>
    </button>
    <img id="modal-image" src="" alt="" class="max-h-[90vh] max-w-[90vw] rounded-lg">
</div>

<!-- Confirmation Modal -->
<div id="confirmation-modal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4">
    <div class="glass rounded-xl max-w-md w-full p-6">
        <h3 id="confirmation-title" class="text-xl font-bold mb-4">Confirm Action</h3>
        <p id="confirmation-message" class="text-muted mb-6">Are you sure you want to perform this action?</p>
        <div class="flex justify-end gap-3">
            <button onclick="closeConfirmationModal()" class="btn btn-ghost">Cancel</button>
            <button id="confirmation-action-btn" class="btn btn-primary">Confirm</button>
        </div>
    </div>
</div>

<!-- Loading Modal -->
<div id="loading-modal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center">
    <div class="glass rounded-xl p-8 flex flex-col items-center">
        <div class="w-16 h-16 rounded-full border-4 border-glass border-t-accent-primary animate-spin mb-4"></div>
        <p id="loading-text" class="text-muted">Loading...</p>
    </div>
</div>

<script>
// Image Modal Functions
function openImageModal(src) {
    document.getElementById('modal-image').src = src;
    document.getElementById('image-modal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeImageModal() {
    document.getElementById('image-modal').classList.add('hidden');
    document.body.style.overflow = 'auto';
}

// Confirmation Modal Functions
let confirmationCallback = null;

function showConfirmation(title, message, confirmCallback, confirmText = 'Confirm') {
    document.getElementById('confirmation-title').textContent = title;
    document.getElementById('confirmation-message').textContent = message;
    document.getElementById('confirmation-action-btn').textContent = confirmText;
    
    confirmationCallback = confirmCallback;
    document.getElementById('confirmation-modal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeConfirmationModal() {
    document.getElementById('confirmation-modal').classList.add('hidden');
    document.body.style.overflow = 'auto';
    confirmationCallback = null;
}

document.getElementById('confirmation-action-btn').addEventListener('click', () => {
    if (confirmationCallback) {
        confirmationCallback();
    }
    closeConfirmationModal();
});

// Loading Modal Functions
function showLoading(text = 'Loading...') {
    document.getElementById('loading-text').textContent = text;
    document.getElementById('loading-modal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function hideLoading() {
    document.getElementById('loading-modal').classList.add('hidden');
    document.body.style.overflow = 'auto';
}

// Close modals with Escape key
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeImageModal();
        closeConfirmationModal();
    }
});

// Close modals when clicking on backdrop
document.getElementById('image-modal').addEventListener('click', (e) => {
    if (e.target.id === 'image-modal') {
        closeImageModal();
    }
});

document.getElementById('confirmation-modal').addEventListener('click', (e) => {
    if (e.target.id === 'confirmation-modal') {
        closeConfirmationModal();
    }
});
</script>